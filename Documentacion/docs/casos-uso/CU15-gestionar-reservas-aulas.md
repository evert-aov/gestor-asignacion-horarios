# CU15 - Gestionar Reservas de Aulas

| Campo                                            | Descripción                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| ------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Caso de uso**                                  | CU15 - Gestionar Reservas de Aulas                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **Propósito**                                    | Permite a Coordinadores y Docentes solicitar reservas especiales de aulas para eventos y actividades, y al Administrador aprobar o rechazar dichas solicitudes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **Actores**                                      | • Coordinador<br>• Docente<br>• Administrador                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **Iniciador**                                    | • Coordinador<br>• Docente                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **Precondición**                                 | El usuario debe haber iniciado sesión en el sistema (CU01).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **Flujo Principal - Crear Reserva**              | • El Coordinador o Docente accede al módulo de "Logística Académica" → "Special Reservation Manager".<br>• El sistema muestra la lista de reservas existentes.<br>• El usuario puede buscar reservas por título o filtrar por estado (pendiente, aprobada, rechazada).<br>• El usuario hace clic en "Crear Reserva".<br>• El sistema muestra un formulario con:<br>&nbsp;&nbsp;- Aula a reservar<br>&nbsp;&nbsp;- Tipo de evento<br>&nbsp;&nbsp;- Título del evento<br>&nbsp;&nbsp;- Descripción (opcional)<br>&nbsp;&nbsp;- Fecha de reserva<br>&nbsp;&nbsp;- Hora de inicio<br>&nbsp;&nbsp;- Hora de fin<br>&nbsp;&nbsp;- Número estimado de asistentes (opcional)<br>• El usuario completa el formulario y guarda.<br>• El sistema valida que:<br>&nbsp;&nbsp;- Todos los campos obligatorios estén completos<br>&nbsp;&nbsp;- La fecha de reserva sea hoy o posterior<br>&nbsp;&nbsp;- La hora de fin sea posterior a la hora de inicio<br>&nbsp;&nbsp;- El aula exista<br>• El sistema crea la reserva con estado "pendiente".<br>• El sistema registra al usuario que creó la reserva.<br>• El sistema muestra mensaje de confirmación. |
| **Flujo Alternativo - Aprobar/Rechazar Reserva** | • El Administrador accede al módulo de reservas.<br>• El sistema muestra todas las reservas con sus estados.<br>• El Administrador puede filtrar por estado para ver solo las pendientes.<br>• El Administrador selecciona una reserva pendiente.<br>• El Administrador puede:<br>&nbsp;&nbsp;- **Aprobar**: Cambia el estado a "aprobada" y registra quién aprobó<br>&nbsp;&nbsp;- **Rechazar**: Cambia el estado a "rechazada" y registra quién rechazó<br>• El sistema actualiza el estado de la reserva.<br>• El sistema muestra mensaje de confirmación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **Flujo Alternativo - Consultar Reservas**       | • El usuario accede al módulo de reservas.<br>• El sistema muestra todas las reservas con:<br>&nbsp;&nbsp;- Título del evento<br>&nbsp;&nbsp;- Aula reservada<br>&nbsp;&nbsp;- Fecha y horario<br>&nbsp;&nbsp;- Estado (pendiente/aprobada/rechazada)<br>&nbsp;&nbsp;- Usuario que creó la reserva<br>&nbsp;&nbsp;- Usuario que aprobó/rechazó (si aplica)<br>• El usuario puede buscar por título.<br>• El usuario puede filtrar por estado.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **Flujo Alternativo - Eliminar Reserva**         | • El usuario o Administrador selecciona una reserva.<br>• El usuario hace clic en "Eliminar".<br>• El sistema elimina la reserva.<br>• El sistema muestra mensaje de confirmación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **Postcondición**                                | Las reservas quedan registradas en el sistema con su estado correspondiente. Las acciones de aprobación/rechazo quedan registradas con el usuario que las realizó.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **Excepción**                                    | • Se intenta crear una reserva con fecha pasada.<br>• La hora de fin es anterior o igual a la hora de inicio.<br>• El aula seleccionada no existe.<br>• Se ingresan datos inválidos o incompletos.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |

## Atributos de Reserva

| Atributo                | Tipo                   | Descripción                                                 |
| ----------------------- | ---------------------- | ----------------------------------------------------------- |
| **classroom_id**        | Foreign Key            | Aula reservada                                              |
| **user_id**             | Foreign Key            | Usuario que creó la reserva                                 |
| **event_type**          | String                 | Tipo de evento (conferencia, taller, examen especial, etc.) |
| **title**               | String (255)           | Título del evento                                           |
| **description**         | Text (opcional)        | Descripción detallada del evento                            |
| **reservation_date**    | Date                   | Fecha de la reserva                                         |
| **start_time**          | Time                   | Hora de inicio                                              |
| **end_time**            | Time                   | Hora de fin                                                 |
| **estimated_attendees** | Integer (opcional)     | Número estimado de asistentes                               |
| **status**              | Enum                   | Estado: pendiente, aprobada, rechazada                      |
| **approved_by**         | Foreign Key (opcional) | Usuario que aprobó/rechazó                                  |

## Estados de Reserva

1. **Pendiente**: Reserva creada, esperando aprobación del Administrador
2. **Aprobada**: Reserva aprobada por el Administrador
3. **Rechazada**: Reserva rechazada por el Administrador

## Validaciones Implementadas

1. **Fecha Válida**: La fecha de reserva debe ser hoy o posterior.
2. **Horario Válido**: La hora de fin debe ser posterior a la hora de inicio.
3. **Aula Existente**: El aula seleccionada debe existir en el sistema.
4. **Campos Obligatorios**: Aula, tipo de evento, título, fecha, hora inicio y hora fin son requeridos.

## Permisos por Rol

-   **Coordinador/Docente**: Puede crear, consultar y eliminar sus propias reservas
-   **Administrador**: Puede aprobar, rechazar, consultar y eliminar cualquier reserva

## Diagrama de Caso de Uso

![Diagrama de Caso de Uso](file:///home/evert/university/subjects/information_systems/gestor-de-horarios-acad-micos/gestion_asignacion_aulas/docs/casos-uso/CU15-gestionar-reservas-aulas.png)
